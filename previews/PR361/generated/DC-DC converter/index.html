<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>DC-DC converter · Dionysos</title><meta name="title" content="DC-DC converter · Dionysos"/><meta property="og:title" content="DC-DC converter · Dionysos"/><meta property="twitter:title" content="DC-DC converter · Dionysos"/><meta name="description" content="Documentation for Dionysos."/><meta property="og:description" content="Documentation for Dionysos."/><meta property="twitter:description" content="Documentation for Dionysos."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/extra_styles.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.png" alt="Dionysos logo"/><img class="docs-dark-only" src="../../assets/logo-dark.png" alt="Dionysos logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Dionysos</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Index</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/abstraction-based-control/">Abstraction-based control</a></li><li><a class="tocitem" href="../../manual/manual/">Overview</a></li></ul></li><li><a class="tocitem" href="../Getting Started/">Getting Started</a></li><li><span class="tocitem">Solvers</span><ul><li class="is-active"><a class="tocitem" href>DC-DC converter</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Example:-DC-DC-converter-solved-by-[Uniform-grid-abstraction](https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/src/manual/manual.md#solvers)-by-exploiting-the-incremental-stability-of-the-system."><span>Example: DC-DC converter solved by Uniform grid abstraction by exploiting the incremental stability of the system.</span></a></li></ul></li><li><a class="tocitem" href="../Gol, Lazar &amp; Belta (2013)/">Gol, Lazar &amp; Belta (2013)</a></li><li><a class="tocitem" href="../Hierarchical-abstraction/">Hierarchical-abstraction</a></li><li><a class="tocitem" href="../Lazy-Ellipsoids-Abstraction/">Lazy-Ellipsoids-Abstraction</a></li><li><a class="tocitem" href="../Lazy-abstraction-reachability/">Lazy-abstraction-reachability</a></li><li><a class="tocitem" href="../Path planning/">Path planning</a></li><li><a class="tocitem" href="../State-feedback Abstraction PWA System/">State-feedback Abstraction PWA System</a></li></ul></li><li><span class="tocitem">Utils</span><ul><li><a class="tocitem" href="../Ellipsoids/">Ellipsoids</a></li><li><a class="tocitem" href="../Grid/">Grid</a></li><li><a class="tocitem" href="../Tree/">Tree</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="../../reference/Domain/">Domain</a></li><li><a class="tocitem" href="../../reference/Mapping/">Mapping</a></li><li><a class="tocitem" href="../../reference/Optim/">Optim</a></li><li><a class="tocitem" href="../../reference/Problem/">Problem</a></li><li><a class="tocitem" href="../../reference/Symbolic/">Symbolic</a></li><li><a class="tocitem" href="../../reference/System/">System</a></li><li><a class="tocitem" href="../../reference/Utils/">Utils</a></li></ul></li><li><span class="tocitem">Developer Docs</span><ul><li><a class="tocitem" href="../../developers/setup/">Set up</a></li><li><a class="tocitem" href="../../developers/git/">Git</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Solvers</a></li><li class="is-active"><a href>DC-DC converter</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>DC-DC converter</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/dionysos-dev/Dionysos.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/src/examples/solvers/DC-DC converter.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Example:-DC-DC-converter-solved-by-[Uniform-grid-abstraction](https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/src/manual/manual.md#solvers)."><a class="docs-heading-anchor" href="#Example:-DC-DC-converter-solved-by-[Uniform-grid-abstraction](https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/src/manual/manual.md#solvers).">Example: DC-DC converter solved by <a href="https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/src/manual/manual.md#solvers">Uniform grid abstraction</a>.</a><a id="Example:-DC-DC-converter-solved-by-[Uniform-grid-abstraction](https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/src/manual/manual.md#solvers).-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-DC-DC-converter-solved-by-[Uniform-grid-abstraction](https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/src/manual/manual.md#solvers)." title="Permalink"></a></h1><p><a href="https://mybinder.org/v2/gh/dionysos-dev/Dionysos.jl/gh-pages?filepath=previews/PR361/generated/DC-DC converter.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Binder"/></a> <a href="https://nbviewer.jupyter.org/github/dionysos-dev/Dionysos.jl/blob/gh-pages/previews/PR361/generated/DC-DC converter.ipynb"><img src="https://img.shields.io/badge/show-nbviewer-579ACA.svg" alt="nbviewer"/></a></p><p>We consider a boost DC-DC converter which has been widely studied from the point of view of hybrid control, see for example in  [1, V.A],[2],[3]. This is a <strong>safety problem</strong> for a <strong>switching system</strong>.</p><p><img src="https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/assets/dcdcboost.jpg?raw=true" alt="Boost DC-DC converter."/></p><p>The state of the system is given by <span>$x(t) = \begin{bmatrix} i_l(t) &amp; v_c(t) \end{bmatrix}^\top$</span>. The switching system has two modes consisting in two-dimensional affine dynamics:</p><p class="math-container">\[\dot{x} = f_p(x) = A_p x + b_p,\quad p=1,2\]</p><p>with</p><p class="math-container">\[A_1 = \begin{bmatrix} -\frac{r_l}{x_l} &amp;0 \\ 0 &amp; -\frac{1}{x_c}\frac{1}{r_0+r_c}  \end{bmatrix}, A_2= \begin{bmatrix} -\frac{1}{x_l}\left(r_l+\frac{r_0r_c}{r_0+r_c}\right) &amp; -\frac{1}{x_l}\frac{r_0}{r_0+r_c}  \\ \frac{1}{x_c}\frac{r_0}{r_0+r_c}   &amp; -\frac{1}{x_c}\frac{1}{r_0+r_c}  \end{bmatrix}, b_1 = b_2 = \begin{bmatrix} \frac{v_s}{x_l}\\0\end{bmatrix}.\]</p><p>The goal is to design a controller to keep the state of the system in a safety region around the reference desired value, using as input only the switching signal. In order to study the concrete system and its symbolic abstraction in a unified framework, we will solve the problem for the sampled system with a sampling time <span>$\tau$</span>. For the construction of the relations in the abstraction, it is necessary to over-approximate attainable sets of a particular cell. In this example, we consider the use of a growth bound function  [4, VIII.2, VIII.5] which is one of the possible methods to over-approximate attainable sets of a particular cell based on the state reach by its center.</p><p>First, let us import <a href="https://github.com/JuliaArrays/StaticArrays.jl">StaticArrays</a> and <a href="https://github.com/JuliaPlots/Plots.jl">Plots</a>.</p><pre><code class="language-julia hljs">using StaticArrays, Plots</code></pre><p>At this point, we import the useful Dionysos sub-modules.</p><pre><code class="language-julia hljs">using Dionysos
const DI = Dionysos
const UT = DI.Utils
const DO = DI.Domain
const ST = DI.System
const SY = DI.Symbolic
const OP = DI.Optim
const AB = OP.Abstraction</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dionysos.Optim.Abstraction</code></pre><h3 id="Definition-of-the-system"><a class="docs-heading-anchor" href="#Definition-of-the-system">Definition of the system</a><a id="Definition-of-the-system-1"></a><a class="docs-heading-anchor-permalink" href="#Definition-of-the-system" title="Permalink"></a></h3><p>we can import the module containing the DCDC problem like this</p><pre><code class="language-julia hljs">include(joinpath(dirname(dirname(pathof(Dionysos))), &quot;problems&quot;, &quot;dc_dc.jl&quot;))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Main.var&quot;Main&quot;.DCDC</code></pre><p>and we can instantiate the DC system with the provided system</p><pre><code class="language-julia hljs">concrete_problem = DCDC.problem(; approx_mode = DCDC.GROWTH)
concrete_system = concrete_problem.system

x0 = SVector(0.0, 0.0)
hx = SVector(2.0 / 4.0e3, 2.0 / 4.0e3)
state_grid = DO.GridFree(x0, hx)
u0 = SVector(1)
hu = SVector(1)
input_grid = DO.GridFree(u0, hu)

using JuMP
optimizer = MOI.instantiate(AB.UniformGridAbstraction.Optimizer)
MOI.set(optimizer, MOI.RawOptimizerAttribute(&quot;concrete_problem&quot;), concrete_problem)
MOI.set(optimizer, MOI.RawOptimizerAttribute(&quot;state_grid&quot;), state_grid)
MOI.set(optimizer, MOI.RawOptimizerAttribute(&quot;input_grid&quot;), input_grid)
MOI.optimize!(optimizer)

abstract_controller = MOI.get(optimizer, MOI.RawOptimizerAttribute(&quot;abstract_controller&quot;))
concrete_controller = MOI.get(optimizer, MOI.RawOptimizerAttribute(&quot;concrete_controller&quot;))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(::Dionysos.Optim.Abstraction.UniformGridAbstraction.var&quot;#concrete_controller#10&quot;{Dionysos.Optim.Abstraction.UniformGridAbstraction.var&quot;#concrete_controller#9#11&quot;{Dionysos.Symbolic.SymbolicModelList{2, 1, Dionysos.Domain.DomainList{2, Float64, Dionysos.Domain.GridFree{2, Float64}}, Dionysos.Domain.DomainList{1, Int64, Dionysos.Domain.GridFree{1, Int64}}, Dionysos.Symbolic.AutomatonList{Dionysos.Utils.SortedTupleSet{3, Tuple{Int64, Int64, Int64}}}}, Dionysos.Utils.SortedTupleSet{2, Tuple{Int64, Int64}}}}) (generic function with 1 method)</code></pre><h3 id="Trajectory-display"><a class="docs-heading-anchor" href="#Trajectory-display">Trajectory display</a><a id="Trajectory-display-1"></a><a class="docs-heading-anchor-permalink" href="#Trajectory-display" title="Permalink"></a></h3><p>We choose the number of steps <code>nsteps</code> for the sampled system, i.e. the total elapsed time: <code>nstep</code>*<code>tstep</code> as well as the true initial state <code>x0</code> which is contained in the initial state-space defined previously.</p><pre><code class="language-julia hljs">nstep = 300
x0 = SVector(1.2, 5.6)
control_trajectory =
    ST.get_closed_loop_trajectory(concrete_system.f, concrete_controller, x0, nstep)

fig = plot(; aspect_ratio = :equal);
plot!(concrete_system.X);
plot!(control_trajectory)</code></pre><img src="e3f6e5ca.svg" alt="Example block output"/><h1 id="Example:-DC-DC-converter-solved-by-[Uniform-grid-abstraction](https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/src/manual/manual.md#solvers)-by-exploiting-the-incremental-stability-of-the-system."><a class="docs-heading-anchor" href="#Example:-DC-DC-converter-solved-by-[Uniform-grid-abstraction](https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/src/manual/manual.md#solvers)-by-exploiting-the-incremental-stability-of-the-system.">Example: DC-DC converter solved by <a href="https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/src/manual/manual.md#solvers">Uniform grid abstraction</a> by exploiting the incremental stability of the system.</a><a id="Example:-DC-DC-converter-solved-by-[Uniform-grid-abstraction](https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/src/manual/manual.md#solvers)-by-exploiting-the-incremental-stability-of-the-system.-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-DC-DC-converter-solved-by-[Uniform-grid-abstraction](https://github.com/dionysos-dev/Dionysos.jl/blob/master/docs/src/manual/manual.md#solvers)-by-exploiting-the-incremental-stability-of-the-system." title="Permalink"></a></h1><h3 id="Definition-of-the-system-2"><a class="docs-heading-anchor" href="#Definition-of-the-system-2">Definition of the system</a><a class="docs-heading-anchor-permalink" href="#Definition-of-the-system-2" title="Permalink"></a></h3><p>we can import the module containing the DCDC problem like this</p><pre><code class="language-julia hljs">include(joinpath(dirname(dirname(pathof(Dionysos))), &quot;problems&quot;, &quot;dc_dc.jl&quot;))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Main.var&quot;Main&quot;.DCDC</code></pre><p>and we can instantiate the DC system with the provided system</p><pre><code class="language-julia hljs">concrete_problem = DCDC.problem(; approx_mode = DCDC.DELTA_GAS)
concrete_system = concrete_problem.system

origin = SVector(0.0, 0.0)
η = (2 / 4.0) * 10^(-3)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.0005</code></pre><p>Note: In the following, <code>P</code> and <code>ϵ</code> are computed by hand, but their computation is not crucial since they only affect the visualization of the abstraction. See https://github.com/dionysos-dev/Dionysos.jl/issues/345</p><pre><code class="language-julia hljs">ϵ = 0.1 * 0.01
P = SMatrix{2, 2}(1.0224, 0.0084, 0.0084, 1.0031)
state_grid = DO.GridEllipsoidalRectangular(origin, SVector(η, η), P / ϵ, concrete_system.X)

u0 = SVector(1)
hu = SVector(1)
input_grid = DO.GridFree(u0, hu)

optimizer = MOI.instantiate(AB.UniformGridAbstraction.Optimizer)
MOI.set(optimizer, MOI.RawOptimizerAttribute(&quot;concrete_problem&quot;), concrete_problem)
MOI.set(optimizer, MOI.RawOptimizerAttribute(&quot;state_grid&quot;), state_grid)
MOI.set(optimizer, MOI.RawOptimizerAttribute(&quot;input_grid&quot;), input_grid)
MOI.set(optimizer, MOI.RawOptimizerAttribute(&quot;δGAS&quot;), true)
MOI.optimize!(optimizer)

abstract_controller = MOI.get(optimizer, MOI.RawOptimizerAttribute(&quot;abstract_controller&quot;))
concrete_controller = MOI.get(optimizer, MOI.RawOptimizerAttribute(&quot;concrete_controller&quot;))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(::Dionysos.Optim.Abstraction.UniformGridAbstraction.var&quot;#concrete_controller#10&quot;{Dionysos.Optim.Abstraction.UniformGridAbstraction.var&quot;#concrete_controller#9#11&quot;{Dionysos.Symbolic.SymbolicModelList{2, 1, Dionysos.Domain.DomainList{2, Float64, Dionysos.Domain.GridEllipsoidalRectangular{2, Float64}}, Dionysos.Domain.DomainList{1, Int64, Dionysos.Domain.GridFree{1, Int64}}, Dionysos.Symbolic.AutomatonList{Dionysos.Utils.SortedTupleSet{3, Tuple{Int64, Int64, Int64}}}}, Dionysos.Utils.SortedTupleSet{2, Tuple{Int64, Int64}}}}) (generic function with 1 method)</code></pre><h3 id="Trajectory-display-2"><a class="docs-heading-anchor" href="#Trajectory-display-2">Trajectory display</a><a class="docs-heading-anchor-permalink" href="#Trajectory-display-2" title="Permalink"></a></h3><p>We choose the number of steps <code>nsteps</code> for the sampled system, i.e. the total elapsed time: <code>nstep</code>*<code>tstep</code> as well as the true initial state <code>x0</code> which is contained in the initial state-space defined previously.</p><pre><code class="language-julia hljs">nstep = 300
x0 = SVector(1.2, 5.6)
control_trajectory =
    ST.get_closed_loop_trajectory(concrete_system.f, concrete_controller, x0, nstep)

fig = plot(; aspect_ratio = :equal);
plot!(concrete_system.X);
plot!(control_trajectory)</code></pre><img src="f7d28165.svg" alt="Example block output"/><h3 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h3><ol><li>A. Girard, G. Pola and P. Tabuada, &quot;Approximately Bisimilar Symbolic Models for Incrementally Stable Switched Systems,&quot; in IEEE Transactions on Automatic Control, vol. 55, no. 1, pp. 116-126, Jan. 2010.</li><li>S. Mouelhi, A. Girard, and G. Gössler. “CoSyMA: a tool for controller synthesis using multi-scale abstractions”. In: HSCC. ACM. 2013, pp. 83–88.</li><li>A. Girard. “Controller synthesis for safety and reachability via approximate bisimulation”. In: Automatica 48.5 (2012), pp. 947–953.</li><li>G. Reissig, A. Weber and M. Rungger, &quot;Feedback Refinement Relations for the Synthesis of Symbolic Controllers,&quot; in IEEE Transactions on Automatic Control, vol. 62, no. 4, pp. 1781-1796.</li></ol><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Getting Started/">« Getting Started</a><a class="docs-footer-nextpage" href="../Gol, Lazar &amp; Belta (2013)/">Gol, Lazar &amp; Belta (2013) »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.6.0 on <span class="colophon-date" title="Monday 2 September 2024 09:33">Monday 2 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
